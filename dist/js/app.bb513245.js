(function(){"use strict";var e={5048:function(e,t){var a;(function(e){e[e["Undefined"]=0]="Undefined",e[e["NotAuthorized"]=1]="NotAuthorized",e[e["Authorized"]=2]="Authorized"})(a||(a={})),t["Z"]=a},963:function(e,t){var a;(function(e){e[e["Edit"]=0]="Edit",e[e["Read"]=1]="Read",e[e["Create"]=2]="Create",e[e["CreatingSecondaryFiles"]=3]="CreatingSecondaryFiles"})(a||(a={})),t["Z"]=a},9197:function(e,t,a){var n=a(8935),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],o=a(1001),s={},l=(0,o.Z)(s,r,i,!1,null,null,null),c=l.exports,d=a(2809),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"enter"},[a("LogIn")],1)},m=[],p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"form log-in"},[a("div",{staticClass:"log-in__title"},[e._v("QR Business card management")]),a("label",{staticClass:"input-wrapper"},[a("div",{staticClass:"input-title"},[e._v("User name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"input",attrs:{tabindex:"1",type:"text"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),a("label",{staticClass:"input-wrapper"},[a("div",{staticClass:"input-title"},[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{tabindex:"2",type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),a("div",{staticClass:"form__message"},[e._v(e._s(e.validation_message))]),a("button",{staticClass:"button",attrs:{type:"button",tabindex:"3"},on:{click:e.logIn}},[e._v("Sign In")])])},f=[],v=n.Z.extend({name:"LogIn",data(){return{login:"",password:"",validation_message:""}},components:{},methods:{logIn(){""!=this.login?""!=this.password?this.$store.dispatch("logIn",{login:this.login,password:this.password}):this.validation_message="Password field is empty":this.validation_message="User name field is empty"}}}),g=v,h=(0,o.Z)(g,p,f,!1,null,null,null),w=h.exports,_=a(5048),b=n.Z.extend({name:"Home",components:{LogIn:w},computed:{access_level(){return this.$store.state.access_level}},watch:{access_level(){this.$store.state.access_level==_.Z.Authorized&&this.$router.push({name:"Home"})}},mounted(){this.$store.commit("updateAccessLevel")}}),y=b,C=(0,o.Z)(y,u,m,!1,null,null,null),A=C.exports;n.Z.use(d.Z);const Z=[{path:"/",name:"Enter",component:A},{path:"/home",name:"Home",component:()=>a.e(830).then(a.bind(a,2830))}],S=new d.Z({routes:Z});var k=S,E=a(4665),j=a(6166),O=a.n(j),T=a(963),I=e=>"https://prykhozhai-qualium.github.io/ar-business-card/#/"+e,L=e=>({id:e&&e.id?e.id:"",name:{value:e&&e.name?e.name:"",changed:!1},link:e&&e.id?I(e.id):"",email:{value:e&&e.email?e.email:"",changed:!1},vcf:{value:null,changed:!1},qrCode:null,mind:null,$state:{changed:!1,updating:!1}}),P=e=>({id:e.id,name:e.username,email:e.email,link:"https://www.qualium-systems.com/",vcf:"#link",qrCode:"#link"}),x=e=>O().create({baseURL:"https://qr.qualium-systems.com/api/v1/",headers:{Authorization:`Bearer ${e}`,"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}});let z=async e=>(e.catch((e=>{alert("Error: "+e)})),await e);const N={namespaced:!0,state:{card_editor:{mode:T.Z.Create,selected_card:L(),active:!1},card_list:{list:[]}},getters:{},mutations:{updateCardList(e,t){e.card_list.list=[],t.forEach((t=>{e.card_list.list.push(P(t))}))},setCardEditorMode(e,{mode:t,card:a,save_card:n=!1}){n||(e.card_editor.selected_card=L(a)),e.card_editor.active=!0,e.card_editor.mode=t},cancelCardEditor(e){e.card_editor.active=!1}},actions:{async updateUserCard(e,{id:t,email:a,name:n,mind:r,vcf:i}){let o=localStorage.getItem("jwt");if(!o)return void(e.rootState.access_level=_.Z.NotAuthorized);let s=new FormData;n&&s.append("username",n),a&&s.append("email",a),i&&s.append("vcf",await i.arrayBuffer()),r&&s.append("target",new File(r,"target.mind")),await z(x(o).patch("users/"+t,s,{headers:{"Content-Type":"multipart/form-data"}}))},async createUserCard(e,t){let a=localStorage.getItem("jwt");if(!a)return void(e.rootState.access_level=_.Z.NotAuthorized);let n=new FormData;n.append("username",t.name),n.append("email",t.email),n.append("vcf",t.vcf),console.log(t);let r=await z(x(a).post("users",n,{headers:{"Content-Type":"multipart/form-data"}}));e.state.card_editor.selected_card.id=r.data.id,e.state.card_editor.selected_card.link=I(r.data.id),e.dispatch("updateCardList")},async deleteCard(e,t){let a=localStorage.getItem("jwt");if(!a)return void(e.rootState.access_level=_.Z.NotAuthorized);await z(x(a).delete("users",{params:{users:[t]}}));e.dispatch("updateCardList")},async updateCardList(e){let t=localStorage.getItem("jwt");if(!t)return void(e.rootState.access_level=_.Z.NotAuthorized);let a=await z(x(t).get("users",{params:{limit:100}}));e.commit("updateCardList",a.data)}}};var $=N;n.Z.use(E.ZP);var q=new E.ZP.Store({state:{access_level:_.Z.Undefined},mutations:{updateAccessLevel(e){localStorage.getItem("jwt")?e.access_level=_.Z.Authorized:e.access_level=_.Z.NotAuthorized}},actions:{async logIn(e,{login:t,password:a}){let n=await O().post("https://qr.qualium-systems.com/api/v1/auth/login",{email:t,password:a});localStorage.setItem("jwt",n.data.accessToken),e.commit("updateAccessLevel")},logOut(e){localStorage.removeItem("jwt"),e.commit("updateAccessLevel")}},modules:{workstation:$}});n.Z.config.productionTip=!1,new n.Z({router:k,store:q,render:e=>e(c)}).$mount("#app")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,i){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],i=e[d][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,r,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+".eb3921bb.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="ar-business-card-admin:";a.l=function(n,r,i,o){if(e[n])e[n].push(r);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+i){s=u;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+i),s.src=n),e[n]=[r];var m=function(t,a){s.onerror=s.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){var e={143:0};a.f.j=function(t,n){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(a,n){r=e[t]=[a,n]}));n.push(r[2]=i);var o=a.p+a.u(t),s=new Error,l=function(n){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}};a.l(o,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,o=n[0],s=n[1],l=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var d=l(a)}for(t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self["webpackChunkar_business_card_admin"]=self["webpackChunkar_business_card_admin"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(9197)}));n=a.O(n)})();
//# sourceMappingURL=app.bb513245.js.map