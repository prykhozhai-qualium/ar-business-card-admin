(function(){"use strict";var e={5048:function(e,t){var n;(function(e){e[e["Undefined"]=0]="Undefined",e[e["NotAuthorized"]=1]="NotAuthorized",e[e["Authorized"]=2]="Authorized"})(n||(n={})),t["Z"]=n},963:function(e,t){var n;(function(e){e[e["Edit"]=0]="Edit",e[e["Read"]=1]="Read",e[e["Create"]=2]="Create",e[e["CreatingSecondaryFiles"]=3]="CreatingSecondaryFiles"})(n||(n={})),t["Z"]=n},9197:function(e,t,n){n(6992),n(8674),n(9601),n(7727);var r=n(8935),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o=n(1001),s={},u=(0,o.Z)(s,a,i,!1,null,null,null),c=u.exports,l=(n(1539),n(8783),n(3948),n(2809)),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"enter"},[n("LogIn")],1)},p=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"form log-in"},[n("div",{staticClass:"log-in__title"},[e._v("QR Business card management")]),n("label",{staticClass:"input-wrapper"},[n("div",{staticClass:"input-title"},[e._v("User name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"input",attrs:{tabindex:"1",type:"text"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),n("label",{staticClass:"input-wrapper"},[n("div",{staticClass:"input-title"},[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{tabindex:"2",type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("div",{staticClass:"form__message"},[e._v(e._s(e.validation_message))]),n("button",{staticClass:"button",attrs:{type:"button",tabindex:"3"},on:{click:e.logIn}},[e._v("Sign In")])])},f=[],v=r.Z.extend({name:"LogIn",data:function(){return{login:"",password:"",validation_message:""}},components:{},methods:{logIn:function(){""!=this.login?""!=this.password?this.$store.dispatch("logIn",{login:this.login,password:this.password}):this.validation_message="Password field is empty":this.validation_message="User name field is empty"}}}),h=v,g=(0,o.Z)(h,m,f,!1,null,null,null),w=g.exports,_=n(5048),b=r.Z.extend({name:"Home",components:{LogIn:w},computed:{access_level:function(){return this.$store.state.access_level}},watch:{access_level:function(){this.$store.state.access_level==_.Z.Authorized&&this.$router.push({name:"Home"})}},mounted:function(){this.$store.commit("updateAccessLevel")}}),C=b,y=(0,o.Z)(C,d,p,!1,null,null,null),x=y.exports;r.Z.use(l.Z);var k=[{path:"/",name:"Enter",component:x},{path:"/home",name:"Home",component:function(){return n.e(830).then(n.bind(n,2830))}}],Z=new l.Z({routes:k}),A=Z,S=n(6198),E=(n(8975),n(4665)),j=n(6166),O=n.n(j),T=(n(4747),n(8309),n(9254),n(963)),I=function(e){return"https://prykhozhai-qualium.github.io/ar-business-card/#/"+e},L=function(e){return{id:e&&e.id?e.id:"",name:{value:e&&e.name?e.name:"",changed:!1},link:e&&e.id?I(e.id):"",email:{value:e&&e.email?e.email:"",changed:!1},vcf:{value:null,changed:!1},qrCode:null,mind:null,$state:{changed:!1,updating:!1}}},P=function(e){return{id:e.id,name:e.username,email:e.email,link:"https://www.qualium-systems.com/",vcf:"#link",qrCode:"#link"}},R=function(e){return O().create({baseURL:"https://qr.qualium-systems.com/api/v1/",headers:{Authorization:"Bearer ".concat(e),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}})},z=function(){var e=(0,S.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.catch((function(e){alert("Error: "+e)})),e.next=3,t;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={namespaced:!0,state:{card_editor:{mode:T.Z.Create,selected_card:L(),active:!1},card_list:{list:[]}},getters:{},mutations:{updateCardList:function(e,t){e.card_list.list=[],t.forEach((function(t){e.card_list.list.push(P(t))}))},setCardEditorMode:function(e,t){var n=t.mode,r=t.card,a=t.save_card,i=void 0!==a&&a;i||(e.card_editor.selected_card=L(r)),e.card_editor.active=!0,e.card_editor.mode=n},cancelCardEditor:function(e){e.card_editor.active=!1}},actions:{updateUserCard:function(e,t){return(0,S.Z)(regeneratorRuntime.mark((function n(){var r,a,i,o,s,u,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.id,a=t.email,i=t.name,o=t.mind,s=t.vcf,u=localStorage.getItem("jwt"),u){n.next=5;break}return e.rootState.access_level=_.Z.NotAuthorized,n.abrupt("return");case 5:if(c=new FormData,i&&c.append("username",i),a&&c.append("email",a),!s){n.next=14;break}return n.t0=c,n.next=12,s.arrayBuffer();case 12:n.t1=n.sent,n.t0.append.call(n.t0,"vcf",n.t1);case 14:return o&&c.append("target",new File(o,"target.mind")),n.next=17,z(R(u).patch("users/"+r,c,{headers:{"Content-Type":"multipart/form-data"}}));case 17:case"end":return n.stop()}}),n)})))()},createUserCard:function(e,t){return(0,S.Z)(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=localStorage.getItem("jwt"),r){n.next=4;break}return e.rootState.access_level=_.Z.NotAuthorized,n.abrupt("return");case 4:return a=new FormData,a.append("username",t.name),a.append("email",t.email),a.append("vcf",t.vcf),console.log(t),n.next=11,z(R(r).post("users",a,{headers:{"Content-Type":"multipart/form-data"}}));case 11:i=n.sent,e.state.card_editor.selected_card.id=i.data.id,e.state.card_editor.selected_card.link=I(i.data.id),e.dispatch("updateCardList");case 15:case"end":return n.stop()}}),n)})))()},deleteCard:function(e,t){return(0,S.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if([],r=localStorage.getItem("jwt"),r){n.next=5;break}return e.rootState.access_level=_.Z.NotAuthorized,n.abrupt("return");case 5:return n.next=7,z(R(r).delete("users",{params:{users:[t]}}));case 7:n.sent,e.dispatch("updateCardList");case 9:case"end":return n.stop()}}),n)})))()},updateCardList:function(e){return(0,S.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if([],n=localStorage.getItem("jwt"),n){t.next=5;break}return e.rootState.access_level=_.Z.NotAuthorized,t.abrupt("return");case 5:return t.next=7,z(R(n).get("users",{params:{limit:100}}));case 7:r=t.sent,e.commit("updateCardList",r.data);case 9:case"end":return t.stop()}}),t)})))()}}},$=N;r.Z.use(E.ZP);var q=new E.ZP.Store({state:{access_level:_.Z.Undefined},mutations:{updateAccessLevel:function(e){localStorage.getItem("jwt")?e.access_level=_.Z.Authorized:e.access_level=_.Z.NotAuthorized}},actions:{logIn:function(e,t){return(0,S.Z)(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.login,a=t.password,n.next=3,O().post("https://qr.qualium-systems.com/api/v1/auth/login",{email:r,password:a});case 3:i=n.sent,localStorage.setItem("jwt",i.data.accessToken),e.commit("updateAccessLevel");case 6:case"end":return n.stop()}}),n)})))()},logOut:function(e){localStorage.removeItem("jwt"),e.commit("updateAccessLevel")}},modules:{workstation:$}});r.Z.config.productionTip=!1,new r.Z({router:A,store:q,render:function(e){return e(c)}}).$mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,i){if(!r){var o=1/0;for(l=0;l<e.length;l++){r=e[l][0],a=e[l][1],i=e[l][2];for(var s=!0,u=0;u<r.length;u++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(s=!1,i<o&&(o=i));if(s){e.splice(l--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"-legacy.d9ed830a.js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="ar-business-card-admin:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var p=function(t,n){s.onerror=s.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p=""}(),function(){var e={143:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error,u=function(r){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}};n.l(o,u,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,i,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var l=u(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},r=self["webpackChunkar_business_card_admin"]=self["webpackChunkar_business_card_admin"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(9197)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.26bae661.js.map